"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[1746],{9669(e,n,a){a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"componentes/funcionalidades-tecnicas","title":"Funcionalidades T\xe9cnicas","description":"Esta secci\xf3n profundiza en la implementaci\xf3n del c\xf3digo, detallando c\xf3mo se resuelven los desaf\xedos t\xe9cnicos clave del proyecto.","source":"@site/docs/05-componentes/funcionalidades-tecnicas.md","sourceDirName":"05-componentes","slug":"/componentes/funcionalidades-tecnicas","permalink":"/vcard/docs/componentes/funcionalidades-tecnicas","draft":false,"unlisted":false,"editUrl":"https://github.com/marathongroup-git/vcard/tree/main/documentation/docs/05-componentes/funcionalidades-tecnicas.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Componentes","permalink":"/vcard/docs/componentes/biblioteca"},"next":{"title":"Conclusiones y Futuro","permalink":"/vcard/docs/conclusiones/resumen"}}');var o=a(4848),s=a(8453);const c={sidebar_position:2},d="Funcionalidades T\xe9cnicas",t={},r=[{value:"1. Sistema de Resoluci\xf3n de Identidad (Reciclaje)",id:"1-sistema-de-resoluci\xf3n-de-identidad-reciclaje",level:2},{value:"L\xf3gica de B\xfasqueda",id:"l\xf3gica-de-b\xfasqueda",level:3},{value:"2. Generaci\xf3n y Optimizaci\xf3n de VCard",id:"2-generaci\xf3n-y-optimizaci\xf3n-de-vcard",level:2},{value:"Procesamiento de Imagen (Canvas)",id:"procesamiento-de-imagen-canvas",level:3},{value:"Ensamblaje del Archivo",id:"ensamblaje-del-archivo",level:3},{value:"3. Renderizado de C\xf3digos QR",id:"3-renderizado-de-c\xf3digos-qr",level:2},{value:"4. Estilos Din\xe1micos",id:"4-estilos-din\xe1micos",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"funcionalidades-t\xe9cnicas",children:"Funcionalidades T\xe9cnicas"})}),"\n",(0,o.jsx)(n.p,{children:"Esta secci\xf3n profundiza en la implementaci\xf3n del c\xf3digo, detallando c\xf3mo se resuelven los desaf\xedos t\xe9cnicos clave del proyecto."}),"\n",(0,o.jsx)(n.h2,{id:"1-sistema-de-resoluci\xf3n-de-identidad-reciclaje",children:"1. Sistema de Resoluci\xf3n de Identidad (Reciclaje)"}),"\n",(0,o.jsxs)(n.p,{children:["El componente ",(0,o.jsx)(n.code,{children:"VCardGenerator"})," (en ",(0,o.jsx)(n.code,{children:"src/components/VCardGenerator.tsx"}),') no solo lee un ID, sino que implementa una estrategia de "b\xfasqueda en cascada" para garantizar que siempre se muestre informaci\xf3n, incluso si el enlace es antiguo.']}),"\n",(0,o.jsx)(n.h3,{id:"l\xf3gica-de-b\xfasqueda",children:"L\xf3gica de B\xfasqueda"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"useEffect(() => {\n    const employeeId = getParam('id'); // 1. Intenta obtener ID expl\xedcito\n\n    if (employeeId) {\n      // B\xfasqueda Directa por ID\n      const foundEmployee = employees.find(emp => emp.id === employeeId);\n      if (foundEmployee) setContact(foundEmployee);\n      \n    } else {\n      // 2. B\xfasqueda por coincidencia de datos (Reciclaje)\n      const urlEmail = getParam('email');\n      const urlPhone = getParam('phone');\n\n      if (urlEmail || urlPhone) {\n        // Busca en la base de datos alguien que tenga ese correo O tel\xe9fono\n        const matchedEmployee = employees.find(emp => {\n          return (emp.email === urlEmail) || (emp.phone === urlPhone);\n        });\n        \n        if (matchedEmployee) setContact(matchedEmployee);\n      }\n      \n      // 3. Fallback a datos en URL (Modo Legacy)\n      // Si no encuentra nada en la BD, usa los datos crudos de la URL\n      else {\n         const firstName = getParam('firstName');\n         // ... construye objeto temporal con params\n      }\n    }\n}, [searchParams]);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"2-generaci\xf3n-y-optimizaci\xf3n-de-vcard",children:"2. Generaci\xf3n y Optimizaci\xf3n de VCard"}),"\n",(0,o.jsxs)(n.p,{children:["La creaci\xf3n del archivo ",(0,o.jsx)(n.code,{children:".vcf"})," no es trivial. Los archivos vCard tienen l\xedmites estrictos de tama\xf1o para las fotos de perfil en ciertos dispositivos (especialmente iOS)."]}),"\n",(0,o.jsx)(n.h3,{id:"procesamiento-de-imagen-canvas",children:"Procesamiento de Imagen (Canvas)"}),"\n",(0,o.jsx)(n.p,{children:"Antes de incrustar la foto en la vCard, la procesamos para reducir su tama\xf1o y asegurar compatibilidad."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Obtenemos la imagen como ",(0,o.jsx)(n.code,{children:"Blob"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["La dibujamos en un ",(0,o.jsx)(n.code,{children:"Canvas"})," HTML5."]}),"\n",(0,o.jsx)(n.li,{children:"La redimensionamos a un m\xe1ximo de 300x300px."}),"\n",(0,o.jsx)(n.li,{children:"Extraemos el Base64 comprimido (JPEG 0.7)."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Fragmento de generateVCard\nif (contact.photo) {\n    const img = new Image();\n    // ... carga la imagen ...\n\n    // Redimensionamiento inteligente\n    const maxWidth = 300;\n    let width = img.width;\n    let height = img.height;\n    \n    if (width > height) {\n        if (width > maxWidth) {\n            height *= maxWidth / width;\n            width = maxWidth;\n        }\n    } // ... l\xf3gica de resize\n\n    // Renderizado en Canvas\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx?.drawImage(img, 0, 0, width, height);\n\n    // Conversi\xf3n a Base64 optimizado\n    const dataUrl = canvas.toDataURL('image/jpeg', 0.7);\n    const base64 = dataUrl.split(',')[1];\n    \n    vcard.addPhoto(base64, 'JPEG');\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"ensamblaje-del-archivo",children:"Ensamblaje del Archivo"}),"\n",(0,o.jsxs)(n.p,{children:["Utilizamos la librer\xeda ",(0,o.jsx)(n.code,{children:"vcard-creator"})," para mapear los campos correctamente seg\xfan el est\xe1ndar vCard 3.0."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const vcard = new VCard();\nvcard.addName(contact.lastName, contact.firstName);\nvcard.addCompany(contact.company);\nvcard.addPhoneNumber(contact.phone, 'CELL');\nvcard.addEmail(contact.email);\n\n// Generaci\xf3n del Blob final\nconst blob = new Blob([vcard.toString()], { type: 'text/x-vcard' });\n"})}),"\n",(0,o.jsx)(n.h2,{id:"3-renderizado-de-c\xf3digos-qr",children:"3. Renderizado de C\xf3digos QR"}),"\n",(0,o.jsxs)(n.p,{children:["Para la generaci\xf3n visual de los c\xf3digos QR se utiliza ",(0,o.jsx)(n.code,{children:"qr-code-styling"}),", que permite incrustar im\xe1genes (logos) sin romper la lectura del c\xf3digo."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Ejemplo de configuraci\xf3n en QRSection.tsx\nconst qrCode = new QRCodeStyling({\n    width: 350,\n    height: 350,\n    data: qrValue,\n    dotsOptions: {\n        color: color, // Usa variables CSS/JS para consistencia de marca\n        type: 'dots', // Estilo de puntos redondeados\n    },\n    image: logo, // Logo corporativo centrado\n    imageOptions: {\n        hideBackgroundDots: true, // Limpia el \xe1rea detr\xe1s del logo\n        imageSize: 0.4, // Tama\xf1o relativo del logo\n    },\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"4-estilos-din\xe1micos",children:"4. Estilos Din\xe1micos"}),"\n",(0,o.jsxs)(n.p,{children:["El proyecto utiliza ",(0,o.jsx)(n.code,{children:"styled-components"})," para manejar los temas y colores de forma din\xe1mica."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const SaveButton = styled.button`\n  background-color: ${COLORS.marathonRed};\n  color: oklch(100% 0 0);\n  border-radius: 50px;\n  \n  &:hover {\n    transform: translateY(-2px); // Animaci\xf3n suave\n    box-shadow: 0 8px 20px oklch(0% 0 0 / 0.15);\n  }\n`;\n"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,n,a){a.d(n,{R:()=>c,x:()=>d});var i=a(6540);const o={},s=i.createContext(o);function c(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);